{"version":3,"sources":["../../../../src/app/shop-token/page.js"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function ShopTokenPage() {\r\n  const [shopDomain, setShopDomain] = useState(\"\");\r\n  const [accessToken, setAccessToken] = useState(\"\");\r\n  const [shopName, setShopName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setMessage(\"\"); // Clear previous messages\r\n\r\n    // Client-side validation\r\n    if (!shopDomain || !accessToken || !shopName) {\r\n      setMessage(\"Please fill in all required fields.\");\r\n      return;\r\n    }\r\n\r\n    if (!shopDomain.includes(\".myshopify.com\")) {\r\n      setMessage(\"Shop domain must end with .myshopify.com\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const res = await fetch(\"/api/save-token\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ shopDomain, accessToken, shopName, email }),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (res.ok) {\r\n        setMessage(\"‚úÖ Token saved successfully!\");\r\n        // Reset form\r\n        setShopDomain(\"\");\r\n        setAccessToken(\"\");\r\n        setShopName(\"\");\r\n        setEmail(\"\");\r\n      } else {\r\n        setMessage(`‚ùå ${data.error || \"Failed to save token.\"}`);\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMessage(\"‚ùå Network error. Please try again.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex justify-center items-center min-h-screen bg-gray-100 p-4\">\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        className=\"bg-white p-8 rounded-xl shadow-md w-full max-w-md space-y-4\"\r\n      >\r\n        <h1 className=\"text-2xl font-bold mb-6 flex items-center justify-center gap-2 text-gray-800\">\r\n          üîë Save Shop Token\r\n        </h1>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Shop Domain <span className=\"text-red-500\">*</span>\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"e.g., example.myshopify.com\"\r\n            className=\"w-full border border-gray-300 rounded-md p-3 focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n            value={shopDomain}\r\n            onChange={(e) => setShopDomain(e.target.value)}\r\n            disabled={loading}\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Access Token <span className=\"text-red-500\">*</span>\r\n          </label>\r\n          <input\r\n            type=\"password\" // Hide token for security\r\n            placeholder=\"shpat_...\"\r\n            className=\"w-full border border-gray-300 rounded-md p-3 focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n            value={accessToken}\r\n            onChange={(e) => setAccessToken(e.target.value)}\r\n            disabled={loading}\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Shop Name <span className=\"text-red-500\">*</span>\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"w-full border border-gray-300 rounded-md p-3 focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n            value={shopName}\r\n            onChange={(e) => setShopName(e.target.value)}\r\n            disabled={loading}\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Email (optional)\r\n          </label>\r\n          <input\r\n            type=\"email\"\r\n            className=\"w-full border border-gray-300 rounded-md p-3 focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            disabled={loading}\r\n          />\r\n        </div>\r\n\r\n        <button\r\n          type=\"submit\"\r\n          disabled={loading}\r\n          className=\"w-full bg-gradient-to-r from-indigo-500 to-purple-500 text-white py-3 px-4 rounded-md hover:opacity-90 transition disabled:opacity-50 flex items-center justify-center gap-2\"\r\n        >\r\n          {loading ? \"‚è≥ Saving...\" : \"üîë Save Token\"}\r\n        </button>\r\n\r\n        {message && (\r\n          <p className=\"mt-4 text-center p-3 rounded-md bg-blue-50 border border-blue-200 text-sm\">\r\n            {message}\r\n          </p>\r\n        )}\r\n      </form>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}