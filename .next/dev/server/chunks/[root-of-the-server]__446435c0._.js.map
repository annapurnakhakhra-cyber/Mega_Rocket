{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/admin/Desktop/next-shiprocket/shiprocket/src/lib/db.js"],"sourcesContent":["\r\n// /lib/db.js\r\nimport mongoose from \"mongoose\";\r\n\r\nlet isConnected = false;\r\n\r\nexport default async function connectDB() {\r\n  if (isConnected) return;\r\n\r\n  if (!process.env.MONGODB_URI) {\r\n    throw new Error(\"❌ MONGODB_URI is missing in .env.local\");\r\n  }\r\n\r\n  try {\r\n    const db = await mongoose.connect(process.env.MONGODB_URI, {\r\n      dbName: \"shopify-app\",\r\n    });\r\n    isConnected = db.connections[0].readyState === 1;\r\n    console.log(\"✅ Database connected\");\r\n  } catch (err) {\r\n    console.error(\"❌ Database connection error:\", err);\r\n    throw err;\r\n  }\r\n}\r\n"],"names":[],"mappings":"AACA,aAAa;;;;;AACb;;AAEA,IAAI,cAAc;AAEH,eAAe;IAC5B,IAAI,aAAa;IAEjB,IAAI,CAAC,QAAQ,GAAG,CAAC,WAAW,EAAE;QAC5B,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI;QACF,MAAM,KAAK,MAAM,oHAAQ,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,WAAW,EAAE;YACzD,QAAQ;QACV;QACA,cAAc,GAAG,WAAW,CAAC,EAAE,CAAC,UAAU,KAAK;QAC/C,QAAQ,GAAG,CAAC;IACd,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,MAAM;IACR;AACF"}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/admin/Desktop/next-shiprocket/shiprocket/src/models/Review.js"],"sourcesContent":["// models/Review.js\r\nimport mongoose from 'mongoose';\r\n\r\nconst reviewSchema = new mongoose.Schema({\r\n  productId: { type: String, required: true },    \r\n  name:       { type: String, required: true },    \r\n  rating:     { type: Number, required: true },    \r\n  review:     { type: String, required: true },    \r\n  email:      { type: String },                    \r\n  createdAt:  { type: Date, default: Date.now },\r\n});\r\n\r\nexport default mongoose.models.Review || mongoose.model('Review', reviewSchema, 'reviews');\r\n"],"names":[],"mappings":"AAAA,mBAAmB;;;;;AACnB;;AAEA,MAAM,eAAe,IAAI,oHAAQ,CAAC,MAAM,CAAC;IACvC,WAAW;QAAE,MAAM;QAAQ,UAAU;IAAK;IAC1C,MAAY;QAAE,MAAM;QAAQ,UAAU;IAAK;IAC3C,QAAY;QAAE,MAAM;QAAQ,UAAU;IAAK;IAC3C,QAAY;QAAE,MAAM;QAAQ,UAAU;IAAK;IAC3C,OAAY;QAAE,MAAM;IAAO;IAC3B,WAAY;QAAE,MAAM;QAAM,SAAS,KAAK,GAAG;IAAC;AAC9C;uCAEe,oHAAQ,CAAC,MAAM,CAAC,MAAM,IAAI,oHAAQ,CAAC,KAAK,CAAC,UAAU,cAAc"}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/admin/Desktop/next-shiprocket/shiprocket/src/app/api/reviews/list/route.js"],"sourcesContent":["// app/api/reviews/list/route.js\r\nimport connectDB from \"@/lib/db\";\r\nimport Review from \"@/models/Review\";\r\n\r\nexport async function GET(req) {\r\n  try {\r\n    await connectDB();\r\n    const { searchParams } = new URL(req.url);\r\n    const productId = searchParams.get(\"productId\");\r\n\r\n    if (!productId) {\r\n      return Response.json(\r\n        { success: false, message: \"productId is required\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const reviews = await Review.find({ productId }).sort({ createdAt: -1 });\r\n\r\n    const avgRating =\r\n      reviews.reduce((sum, r) => sum + r.rating, 0) / (reviews.length || 1);\r\n\r\n    return Response.json({\r\n      success: true,\r\n      productId,\r\n      reviews,\r\n      avgRating: Number(avgRating.toFixed(1)),\r\n      totalReviews: reviews.length,\r\n    });\r\n  } catch (error) {\r\n    return Response.json(\r\n      { success: false, message: error.message },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA,gCAAgC;;;;;AAChC;AACA;;;AAEO,eAAe,IAAI,GAAG;IAC3B,IAAI;QACF,MAAM,IAAA,2IAAS;QACf,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,IAAI,GAAG;QACxC,MAAM,YAAY,aAAa,GAAG,CAAC;QAEnC,IAAI,CAAC,WAAW;YACd,OAAO,SAAS,IAAI,CAClB;gBAAE,SAAS;gBAAO,SAAS;YAAwB,GACnD;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,UAAU,MAAM,kJAAM,CAAC,IAAI,CAAC;YAAE;QAAU,GAAG,IAAI,CAAC;YAAE,WAAW,CAAC;QAAE;QAEtE,MAAM,YACJ,QAAQ,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,MAAM,EAAE,KAAK,CAAC,QAAQ,MAAM,IAAI,CAAC;QAEtE,OAAO,SAAS,IAAI,CAAC;YACnB,SAAS;YACT;YACA;YACA,WAAW,OAAO,UAAU,OAAO,CAAC;YACpC,cAAc,QAAQ,MAAM;QAC9B;IACF,EAAE,OAAO,OAAO;QACd,OAAO,SAAS,IAAI,CAClB;YAAE,SAAS;YAAO,SAAS,MAAM,OAAO;QAAC,GACzC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}