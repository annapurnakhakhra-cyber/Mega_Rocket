{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/admin/Desktop/next-shiprocket/shiprocket/src/lib/db.js"],"sourcesContent":["\r\n// /lib/db.js\r\nimport mongoose from \"mongoose\";\r\n\r\nlet isConnected = false;\r\n\r\nexport default async function connectDB() {\r\n  if (isConnected) return;\r\n\r\n  if (!process.env.MONGODB_URI) {\r\n    throw new Error(\"âŒ MONGODB_URI is missing in .env.local\");\r\n  }\r\n\r\n  try {\r\n    const db = await mongoose.connect(process.env.MONGODB_URI, {\r\n      dbName: \"shopify-app\",\r\n    });\r\n    isConnected = db.connections[0].readyState === 1;\r\n    console.log(\"âœ… Database connected\");\r\n  } catch (err) {\r\n    console.error(\"âŒ Database connection error:\", err);\r\n    throw err;\r\n  }\r\n}\r\n"],"names":[],"mappings":"AACA,aAAa;;;;;AACb;;AAEA,IAAI,cAAc;AAEH,eAAe;IAC5B,IAAI,aAAa;IAEjB,IAAI,CAAC,QAAQ,GAAG,CAAC,WAAW,EAAE;QAC5B,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI;QACF,MAAM,KAAK,MAAM,oHAAQ,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,WAAW,EAAE;YACzD,QAAQ;QACV;QACA,cAAc,GAAG,WAAW,CAAC,EAAE,CAAC,UAAU,KAAK;QAC/C,QAAQ,GAAG,CAAC;IACd,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,MAAM;IACR;AACF"}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/admin/Desktop/next-shiprocket/shiprocket/src/models/Otp.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst OtpSchema = new mongoose.Schema({\r\n  email: String,\r\n  otp: String,\r\n  createdAt: { type: Date, default: Date.now, expires: 300 }, // 5 min\r\n});\r\n\r\nexport default mongoose.models.Otp || mongoose.model(\"Otp\", OtpSchema);\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,YAAY,IAAI,oHAAQ,CAAC,MAAM,CAAC;IACpC,OAAO;IACP,KAAK;IACL,WAAW;QAAE,MAAM;QAAM,SAAS,KAAK,GAAG;QAAE,SAAS;IAAI;AAC3D;uCAEe,oHAAQ,CAAC,MAAM,CAAC,GAAG,IAAI,oHAAQ,CAAC,KAAK,CAAC,OAAO"}},
    {"offset": {"line": 184, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/admin/Desktop/next-shiprocket/shiprocket/src/lib/sendMail.js"],"sourcesContent":["import nodemailer from \"nodemailer\";\r\n\r\nexport const sendMail = async (to, subject, html) => {\r\n  const transporter = nodemailer.createTransport({\r\n    service: \"gmail\",\r\n    auth: {\r\n      user: process.env.MAIL_USER,\r\n      pass: process.env.MAIL_PASS,\r\n    },\r\n  });\r\n\r\n  return transporter.sendMail({\r\n    from: process.env.MAIL_USER,\r\n    to,\r\n    subject,\r\n    html,\r\n  });\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,WAAW,OAAO,IAAI,SAAS;IAC1C,MAAM,cAAc,0KAAU,CAAC,eAAe,CAAC;QAC7C,SAAS;QACT,MAAM;YACJ,MAAM,QAAQ,GAAG,CAAC,SAAS;YAC3B,MAAM,QAAQ,GAAG,CAAC,SAAS;QAC7B;IACF;IAEA,OAAO,YAAY,QAAQ,CAAC;QAC1B,MAAM,QAAQ,GAAG,CAAC,SAAS;QAC3B;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 209, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/admin/Desktop/next-shiprocket/shiprocket/src/app/api/auth/send-otp/route.js"],"sourcesContent":["import connectToDB from \"@/lib/db\"; // default import\r\nimport Otp from \"@/models/Otp\";\r\nimport { sendMail } from \"@/lib/sendMail\";\r\n\r\nexport async function POST(req) {\r\n  try {\r\n    await connectToDB();\r\n\r\n    const { email } = await req.json();\r\n    if (!email) {\r\n      return new Response(JSON.stringify({ success: false, msg: \"Email is required\" }), {\r\n        status: 400,\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n      });\r\n    }\r\n\r\n    // Generate OTP\r\n    const otp = Math.floor(100000 + Math.random() * 900000).toString();\r\n\r\n    // Save OTP to DB\r\n    await Otp.create({ email, otp });\r\n\r\n    // Send OTP email\r\n    await sendMail(email, \"Your OTP\", `<h1>Your OTP: ${otp}</h1>`);\r\n\r\n    // Return success\r\n    return new Response(JSON.stringify({ success: true, msg: \"OTP sent\" }), {\r\n      status: 200,\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n    });\r\n  } catch (err) {\r\n    console.error(\"ðŸ’¥ OTP API Error:\", err);\r\n    return new Response(JSON.stringify({ success: false, msg: err.message }), {\r\n      status: 500,\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n    });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA,+NAAoC,iBAAiB;AACrD;AACA;;;;AAEO,eAAe,KAAK,GAAG;IAC5B,IAAI;QACF,MAAM,IAAA,2IAAW;QAEjB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,IAAI;QAChC,IAAI,CAAC,OAAO;YACV,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC;gBAAE,SAAS;gBAAO,KAAK;YAAoB,IAAI;gBAChF,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;YAChD;QACF;QAEA,eAAe;QACf,MAAM,MAAM,KAAK,KAAK,CAAC,SAAS,KAAK,MAAM,KAAK,QAAQ,QAAQ;QAEhE,iBAAiB;QACjB,MAAM,+IAAG,CAAC,MAAM,CAAC;YAAE;YAAO;QAAI;QAE9B,iBAAiB;QACjB,MAAM,IAAA,kJAAQ,EAAC,OAAO,YAAY,CAAC,cAAc,EAAE,IAAI,KAAK,CAAC;QAE7D,iBAAiB;QACjB,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC;YAAE,SAAS;YAAM,KAAK;QAAW,IAAI;YACtE,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;QAChD;IACF,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,qBAAqB;QACnC,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC;YAAE,SAAS;YAAO,KAAK,IAAI,OAAO;QAAC,IAAI;YACxE,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;QAChD;IACF;AACF"}}]
}