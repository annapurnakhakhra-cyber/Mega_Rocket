{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/admin/Desktop/next-shiprocket/shiprocket/src/lib/mongodb.js"],"sourcesContent":["// lib/mongodb.js\r\n\r\nimport mongoose from 'mongoose';\r\n\r\nconst MONGODB_URI = process.env.MONGODB_URI;\r\n\r\nif (!MONGODB_URI) {\r\n  throw new Error('Please define the MONGODB_URI environment variable');\r\n}\r\n\r\nlet cached = global.mongoose;\r\n\r\nif (!cached) {\r\n  cached = global.mongoose = { conn: null, promise: null };\r\n}\r\n\r\nasync function connectDB() {\r\n  if (cached.conn) {\r\n    return cached.conn;\r\n  }\r\n\r\n  if (!cached.promise) {\r\n    const opts = {\r\n      bufferCommands: false,\r\n    };\r\n\r\n    cached.promise = mongoose.connect(MONGODB_URI, opts).then((mongoose) => {\r\n      console.log('✅ MongoDB connected successfully');\r\n      return mongoose;\r\n    });\r\n  }\r\n\r\n  try {\r\n    cached.conn = await cached.promise;\r\n  } catch (e) {\r\n    cached.promise = null;\r\n    throw e;\r\n  }\r\n\r\n  return cached.conn;\r\n}\r\n\r\nexport default connectDB;"],"names":[],"mappings":"AAAA,iBAAiB;;;;;AAEjB;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;AAE3C,IAAI,CAAC,aAAa;IAChB,MAAM,IAAI,MAAM;AAClB;AAEA,IAAI,SAAS,yDAAO,QAAQ;AAE5B,IAAI,CAAC,QAAQ;IACX,SAAS,yDAAO,QAAQ,GAAG;QAAE,MAAM;QAAM,SAAS;IAAK;AACzD;AAEA,eAAe;IACb,IAAI,OAAO,IAAI,EAAE;QACf,OAAO,OAAO,IAAI;IACpB;IAEA,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,MAAM,OAAO;YACX,gBAAgB;QAClB;QAEA,OAAO,OAAO,GAAG,oHAAQ,CAAC,OAAO,CAAC,aAAa,MAAM,IAAI,CAAC,CAAC;YACzD,QAAQ,GAAG,CAAC;YACZ,OAAO;QACT;IACF;IAEA,IAAI;QACF,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IACpC,EAAE,OAAO,GAAG;QACV,OAAO,OAAO,GAAG;QACjB,MAAM;IACR;IAEA,OAAO,OAAO,IAAI;AACpB;uCAEe"}},
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/admin/Desktop/next-shiprocket/shiprocket/src/models/SuggestedProduct.js"],"sourcesContent":["// models/SuggestedProduct.js\r\n\r\nimport mongoose from 'mongoose';\r\n\r\nconst SuggestedProductSchema = new mongoose.Schema(\r\n  {\r\n    shopifyProductId: {\r\n      type: String,\r\n      required: true,\r\n      unique: true,\r\n    },\r\n    productHandle: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    title: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    vendor: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    price: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    compareAtPrice: {\r\n      type: Number,\r\n      default: null,\r\n    },\r\n    featuredImageUrl: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    variantId: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    isActive: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    displayOrder: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n  },\r\n  {\r\n    timestamps: true,\r\n  }\r\n);\r\n\r\n// Create indexes\r\nSuggestedProductSchema.index({ shopifyProductId: 1 });\r\nSuggestedProductSchema.index({ isActive: 1, displayOrder: 1 });\r\n\r\n// Prevent model recompilation in development\r\nexport default mongoose.models.SuggestedProduct || \r\n  mongoose.model('SuggestedProduct', SuggestedProductSchema);"],"names":[],"mappings":"AAAA,6BAA6B;;;;;AAE7B;;AAEA,MAAM,yBAAyB,IAAI,oHAAQ,CAAC,MAAM,CAChD;IACE,kBAAkB;QAChB,MAAM;QACN,UAAU;QACV,QAAQ;IACV;IACA,eAAe;QACb,MAAM;QACN,UAAU;IACZ;IACA,OAAO;QACL,MAAM;QACN,UAAU;IACZ;IACA,QAAQ;QACN,MAAM;QACN,SAAS;IACX;IACA,OAAO;QACL,MAAM;QACN,UAAU;IACZ;IACA,gBAAgB;QACd,MAAM;QACN,SAAS;IACX;IACA,kBAAkB;QAChB,MAAM;QACN,SAAS;IACX;IACA,WAAW;QACT,MAAM;QACN,SAAS;IACX;IACA,UAAU;QACR,MAAM;QACN,SAAS;IACX;IACA,cAAc;QACZ,MAAM;QACN,SAAS;IACX;AACF,GACA;IACE,YAAY;AACd;AAGF,iBAAiB;AACjB,uBAAuB,KAAK,CAAC;IAAE,kBAAkB;AAAE;AACnD,uBAAuB,KAAK,CAAC;IAAE,UAAU;IAAG,cAAc;AAAE;uCAG7C,oHAAQ,CAAC,MAAM,CAAC,gBAAgB,IAC7C,oHAAQ,CAAC,KAAK,CAAC,oBAAoB"}},
    {"offset": {"line": 161, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/admin/Desktop/next-shiprocket/shiprocket/src/app/api/suggested/list/route.js"],"sourcesContent":["// app/api/suggested/list/route.js\r\n\r\nimport { NextResponse } from 'next/server';\r\nimport connectDB from '@/lib/mongodb';\r\nimport SuggestedProduct from '@/models/SuggestedProduct';\r\n\r\nexport async function GET(request) {\r\n  console.log('=== LIST SUGGESTED PRODUCTS API CALLED ===');\r\n  \r\n  try {\r\n    // Get query params\r\n    const { searchParams } = new URL(request.url);\r\n    const activeOnly = searchParams.get('activeOnly') || 'true';\r\n    console.log('Query params - activeOnly:', activeOnly);\r\n    \r\n    console.log('Connecting to MongoDB...');\r\n    await connectDB();\r\n    console.log('✅ MongoDB connected successfully');\r\n    \r\n    // Build query\r\n    const query = activeOnly === 'true' ? { isActive: true } : {};\r\n    console.log('Query:', query);\r\n\r\n    // Fetch suggested products\r\n    console.log('Fetching suggested products from database...');\r\n    const suggestedProducts = await SuggestedProduct.find(query)\r\n      .sort({ displayOrder: 1, createdAt: -1 })\r\n      .lean();\r\n\r\n    console.log(`✅ Found ${suggestedProducts.length} suggested products`);\r\n\r\n    // Return with CORS headers\r\n    return NextResponse.json(\r\n      {\r\n        success: true,\r\n        products: suggestedProducts,\r\n        count: suggestedProducts.length\r\n      },\r\n      {\r\n        status: 200,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Access-Control-Allow-Origin': '*',\r\n          'Access-Control-Allow-Methods': 'GET, OPTIONS',\r\n          'Access-Control-Allow-Headers': 'Content-Type, Authorization',\r\n        }\r\n      }\r\n    );\r\n\r\n  } catch (error) {\r\n    console.error('=== ERROR IN LIST SUGGESTED API ===');\r\n    console.error('Error:', error);\r\n    \r\n    return NextResponse.json(\r\n      { \r\n        success: false, \r\n        error: 'Internal server error',\r\n        message: error.message,\r\n        products: [],\r\n        count: 0\r\n      },\r\n      { \r\n        status: 500,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Access-Control-Allow-Origin': '*',\r\n        }\r\n      }\r\n    );\r\n  }\r\n}\r\n\r\n// Handle OPTIONS preflight request\r\nexport async function OPTIONS(request) {\r\n  return new NextResponse(null, {\r\n    status: 200,\r\n    headers: {\r\n      'Access-Control-Allow-Origin': '*',\r\n      'Access-Control-Allow-Methods': 'GET, OPTIONS',\r\n      'Access-Control-Allow-Headers': 'Content-Type, Authorization',\r\n      'Access-Control-Max-Age': '86400',\r\n    },\r\n  });\r\n}"],"names":[],"mappings":"AAAA,kCAAkC;;;;;;;AAElC;AACA;AACA;;;;AAEO,eAAe,IAAI,OAAO;IAC/B,QAAQ,GAAG,CAAC;IAEZ,IAAI;QACF,mBAAmB;QACnB,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,aAAa,aAAa,GAAG,CAAC,iBAAiB;QACrD,QAAQ,GAAG,CAAC,8BAA8B;QAE1C,QAAQ,GAAG,CAAC;QACZ,MAAM,IAAA,gJAAS;QACf,QAAQ,GAAG,CAAC;QAEZ,cAAc;QACd,MAAM,QAAQ,eAAe,SAAS;YAAE,UAAU;QAAK,IAAI,CAAC;QAC5D,QAAQ,GAAG,CAAC,UAAU;QAEtB,2BAA2B;QAC3B,QAAQ,GAAG,CAAC;QACZ,MAAM,oBAAoB,MAAM,4JAAgB,CAAC,IAAI,CAAC,OACnD,IAAI,CAAC;YAAE,cAAc;YAAG,WAAW,CAAC;QAAE,GACtC,IAAI;QAEP,QAAQ,GAAG,CAAC,CAAC,QAAQ,EAAE,kBAAkB,MAAM,CAAC,mBAAmB,CAAC;QAEpE,2BAA2B;QAC3B,OAAO,8JAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,UAAU;YACV,OAAO,kBAAkB,MAAM;QACjC,GACA;YACE,QAAQ;YACR,SAAS;gBACP,gBAAgB;gBAChB,+BAA+B;gBAC/B,gCAAgC;gBAChC,gCAAgC;YAClC;QACF;IAGJ,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC;QACd,QAAQ,KAAK,CAAC,UAAU;QAExB,OAAO,8JAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,OAAO;YACP,SAAS,MAAM,OAAO;YACtB,UAAU,EAAE;YACZ,OAAO;QACT,GACA;YACE,QAAQ;YACR,SAAS;gBACP,gBAAgB;gBAChB,+BAA+B;YACjC;QACF;IAEJ;AACF;AAGO,eAAe,QAAQ,OAAO;IACnC,OAAO,IAAI,8JAAY,CAAC,MAAM;QAC5B,QAAQ;QACR,SAAS;YACP,+BAA+B;YAC/B,gCAAgC;YAChC,gCAAgC;YAChC,0BAA0B;QAC5B;IACF;AACF"}}]
}