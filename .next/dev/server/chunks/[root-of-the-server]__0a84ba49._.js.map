{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/admin/Desktop/next-shiprocket/shiprocket/src/lib/db.js"],"sourcesContent":["\r\n// /lib/db.js\r\nimport mongoose from \"mongoose\";\r\n\r\nlet isConnected = false;\r\n\r\nexport default async function connectDB() {\r\n  if (isConnected) return;\r\n\r\n  if (!process.env.MONGODB_URI) {\r\n    throw new Error(\"❌ MONGODB_URI is missing in .env.local\");\r\n  }\r\n\r\n  try {\r\n    const db = await mongoose.connect(process.env.MONGODB_URI, {\r\n      dbName: \"shopify-app\",\r\n    });\r\n    isConnected = db.connections[0].readyState === 1;\r\n    console.log(\"✅ Database connected\");\r\n  } catch (err) {\r\n    console.error(\"❌ Database connection error:\", err);\r\n    throw err;\r\n  }\r\n}\r\n"],"names":[],"mappings":"AACA,aAAa;;;;;AACb;;AAEA,IAAI,cAAc;AAEH,eAAe;IAC5B,IAAI,aAAa;IAEjB,IAAI,CAAC,QAAQ,GAAG,CAAC,WAAW,EAAE;QAC5B,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI;QACF,MAAM,KAAK,MAAM,oHAAQ,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,WAAW,EAAE;YACzD,QAAQ;QACV;QACA,cAAc,GAAG,WAAW,CAAC,EAAE,CAAC,UAAU,KAAK;QAC/C,QAAQ,GAAG,CAAC;IACd,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,MAAM;IACR;AACF"}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/admin/Desktop/next-shiprocket/shiprocket/src/models/Otp.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst OtpSchema = new mongoose.Schema({\r\n  email: String,\r\n  otp: String,\r\n  createdAt: { type: Date, default: Date.now, expires: 300 }, // 5 min\r\n});\r\n\r\nexport default mongoose.models.Otp || mongoose.model(\"Otp\", OtpSchema);\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,YAAY,IAAI,oHAAQ,CAAC,MAAM,CAAC;IACpC,OAAO;IACP,KAAK;IACL,WAAW;QAAE,MAAM;QAAM,SAAS,KAAK,GAAG;QAAE,SAAS;IAAI;AAC3D;uCAEe,oHAAQ,CAAC,MAAM,CAAC,GAAG,IAAI,oHAAQ,CAAC,KAAK,CAAC,OAAO"}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/admin/Desktop/next-shiprocket/shiprocket/src/models/User.js"],"sourcesContent":["\r\nimport mongoose from \"mongoose\";\r\n\r\nconst UserSchema = new mongoose.Schema(\r\n  {\r\n    adminName: String,\r\n    email: { type: String, unique: true },\r\n    shopName: String,\r\n    shopUrl: String,\r\n    accessToken: String,\r\n  },\r\n  { timestamps: true }\r\n);\r\n\r\nexport default mongoose.models.User || mongoose.model(\"User\", UserSchema);\r\n\r\n"],"names":[],"mappings":";;;;AACA;;AAEA,MAAM,aAAa,IAAI,oHAAQ,CAAC,MAAM,CACpC;IACE,WAAW;IACX,OAAO;QAAE,MAAM;QAAQ,QAAQ;IAAK;IACpC,UAAU;IACV,SAAS;IACT,aAAa;AACf,GACA;IAAE,YAAY;AAAK;uCAGN,oHAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,oHAAQ,CAAC,KAAK,CAAC,QAAQ"}},
    {"offset": {"line": 141, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/admin/Desktop/next-shiprocket/shiprocket/src/lib/jwt.js"],"sourcesContent":["\r\n\r\n\r\n\r\nimport jwt from \"jsonwebtoken\";\r\n\r\nconst JWT_SECRET = process.env.JWT_SECRET || \"your_super_secret_key\";\r\n\r\n// Generate a token\r\nexport function signToken(payload, expiresIn = \"1h\") {\r\n  return jwt.sign(payload, JWT_SECRET, { expiresIn });\r\n}\r\n\r\n// Verify a token\r\nexport function verifyToken(token) {\r\n  try {\r\n    return jwt.verify(token, JWT_SECRET);\r\n  } catch (err) {\r\n    return null;\r\n  }\r\n}\r\n  "],"names":[],"mappings":";;;;;;AAIA;;AAEA,MAAM,aAAa,QAAQ,GAAG,CAAC,UAAU,IAAI;AAGtC,SAAS,UAAU,OAAO,EAAE,YAAY,IAAI;IACjD,OAAO,gKAAG,CAAC,IAAI,CAAC,SAAS,YAAY;QAAE;IAAU;AACnD;AAGO,SAAS,YAAY,KAAK;IAC/B,IAAI;QACF,OAAO,gKAAG,CAAC,MAAM,CAAC,OAAO;IAC3B,EAAE,OAAO,KAAK;QACZ,OAAO;IACT;AACF"}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/admin/Desktop/next-shiprocket/shiprocket/src/app/api/auth/verify-otp/route.js"],"sourcesContent":["export const dynamic = \"force-dynamic\";\r\n\r\nimport connectToDB from \"@/lib/db\";\r\nimport Otp from \"@/models/Otp\";\r\nimport User from \"@/models/User\";\r\nimport { signToken } from \"@/lib/jwt\";\r\n\r\nexport async function POST(req) {\r\n  await connectToDB(); // <-- fixed\r\n\r\n  const { email, otp } = await req.json();\r\n\r\n  const record = await Otp.findOne({ email, otp });\r\n  if (!record) return Response.json({ success: false, msg: \"Invalid OTP\" });\r\n\r\n  let user = await User.findOne({ email });\r\n  if (!user) user = await User.create({ email });\r\n\r\n  const token = signToken({ email });\r\n\r\n  // Optionally delete the OTP after verification\r\n  await Otp.deleteOne({ email, otp });\r\n\r\n  return Response.json({ success: true, token });\r\n}\r\n"],"names":[],"mappings":";;;;;;AAEA;AACA;AACA;AACA;AALO,MAAM,UAAU;;;;;AAOhB,eAAe,KAAK,GAAG;IAC5B,MAAM,IAAA,2IAAW,KAAI,YAAY;IAEjC,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,MAAM,IAAI,IAAI;IAErC,MAAM,SAAS,MAAM,+IAAG,CAAC,OAAO,CAAC;QAAE;QAAO;IAAI;IAC9C,IAAI,CAAC,QAAQ,OAAO,SAAS,IAAI,CAAC;QAAE,SAAS;QAAO,KAAK;IAAc;IAEvE,IAAI,OAAO,MAAM,gJAAI,CAAC,OAAO,CAAC;QAAE;IAAM;IACtC,IAAI,CAAC,MAAM,OAAO,MAAM,gJAAI,CAAC,MAAM,CAAC;QAAE;IAAM;IAE5C,MAAM,QAAQ,IAAA,8IAAS,EAAC;QAAE;IAAM;IAEhC,+CAA+C;IAC/C,MAAM,+IAAG,CAAC,SAAS,CAAC;QAAE;QAAO;IAAI;IAEjC,OAAO,SAAS,IAAI,CAAC;QAAE,SAAS;QAAM;IAAM;AAC9C"}}]
}