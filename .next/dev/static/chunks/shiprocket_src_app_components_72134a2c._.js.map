{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["C:/Users/admin/Desktop/next-shiprocket/shiprocket/src/app/components/LoginStep.js"],"sourcesContent":["// shiprocket/src/app/components/LoginStep.js - (Same as before, using the /api/user-data endpoint)\r\n\r\nimport React, { useState } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faSpinner } from '@fortawesome/free-solid-svg-icons';\r\n\r\nconst LoginStep = ({ onLoginSuccess }) => {\r\n    // Setting a default number for easy testing, but this should be dynamic\r\n    const [mobile, setMobile] = useState('9876543210'); \r\n    const [otp, setOtp] = useState('');\r\n    const [isOtpSent, setIsOtpSent] = useState(false);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const handleSendOtp = async () => {\r\n        if (mobile.length !== 10) return;\r\n        setIsLoading(true);\r\n        // Simulate OTP sending delay\r\n        await new Promise(resolve => setTimeout(resolve, 1500)); \r\n        \r\n        setIsOtpSent(true); \r\n        alert(`DEMO: OTP sent to +91 ${mobile}. Use 1234 to verify. Check server console for dynamic DB attempt.`); \r\n        setIsLoading(false);\r\n    };\r\n\r\n    const handleVerifyOtp = async () => {\r\n        if (otp !== '1234') { \r\n            alert('Invalid OTP. Please use 1234.');\r\n            return;\r\n        }\r\n        setIsLoading(true);\r\n        \r\n        // ‚≠êÔ∏è DYNAMIC DATA FETCHING LOGIC (API Call) ‚≠êÔ∏è\r\n        try {\r\n            const response = await fetch('/api/user-data', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ mobile: mobile }) // Send the mobile number to API\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const errorData = await response.json();\r\n                throw new Error(errorData.message || 'Failed to fetch user data from API.');\r\n            }\r\n\r\n            // üü¢ SUCCESS: Receive dynamic data from the API\r\n            const userData = await response.json(); \r\n            \r\n            console.log(\"‚úÖ Dynamic User Data Received:\", userData);\r\n            \r\n            onLoginSuccess(userData);\r\n\r\n        } catch (error) {\r\n            console.error(\"Login verification failed:\", error);\r\n            alert(`Login Failed: ${error.message}`);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <h3 className=\"text-2xl font-bold text-blue-600\">\r\n                {isOtpSent ? 'Verify OTP' : 'Quick Login'}\r\n            </h3>\r\n            \r\n            {!isOtpSent ? (\r\n                <div className=\"space-y-4\">\r\n                    <input\r\n                        type=\"tel\"\r\n                        className=\"w-full p-4 border-2 border-gray-300 rounded-lg text-lg focus:ring-blue-500 focus:border-blue-500\"\r\n                        placeholder=\"10 digit Mobile Number\"\r\n                        value={mobile}\r\n                        onChange={(e) => setMobile(e.target.value)}\r\n                        maxLength={10}\r\n                        disabled={isLoading}\r\n                    />\r\n                    <button\r\n                        onClick={handleSendOtp}\r\n                        disabled={isLoading || mobile.length !== 10}\r\n                        className=\"w-full bg-blue-600 text-white p-3 rounded-lg font-bold hover:bg-blue-700 disabled:bg-blue-300 flex items-center justify-center shadow-md\"\r\n                    >\r\n                        {isLoading ? <FontAwesomeIcon icon={faSpinner} spin className=\"mr-2\" /> : 'Get OTP & Auto-fill'}\r\n                    </button>\r\n                </div>\r\n            ) : (\r\n                <div className=\"space-y-4\">\r\n                    <input\r\n                        type=\"text\"\r\n                        className=\"w-full p-4 border-2 border-gray-300 rounded-lg text-lg text-center tracking-widest focus:ring-green-500 focus:border-green-500\"\r\n                        placeholder=\"XXXX\"\r\n                        value={otp}\r\n                        onChange={(e) => setOtp(e.target.value)}\r\n                        maxLength={4}\r\n                        disabled={isLoading}\r\n                    />\r\n                    <button\r\n                        onClick={handleVerifyOtp}\r\n                        disabled={isLoading || otp.length !== 4}\r\n                        className=\"w-full bg-green-600 text-white p-3 rounded-lg font-bold hover:bg-green-700 disabled:bg-green-300 flex items-center justify-center shadow-md\"\r\n                    >\r\n                        {isLoading ? <FontAwesomeIcon icon={faSpinner} spin className=\"mr-2\" /> : 'Verify OTP'}\r\n                    </button>\r\n                    <button \r\n                        onClick={() => setIsOtpSent(false)} \r\n                        className=\"w-full text-blue-600 text-sm mt-2 hover:underline\"\r\n                    >\r\n                        Change Number\r\n                    </button>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LoginStep;"],"names":["React","useState","FontAwesomeIcon","faSpinner","LoginStep","onLoginSuccess","mobile","setMobile","otp","setOtp","isOtpSent","setIsOtpSent","isLoading","setIsLoading","handleSendOtp","length","Promise","resolve","setTimeout","alert","handleVerifyOtp","response","fetch","method","headers","body","JSON","stringify","ok","errorData","json","Error","message","userData","console","log","error","e","target","value"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 184, "column": 0}, "map": {"version":3,"sources":["C:/Users/admin/Desktop/next-shiprocket/shiprocket/src/app/components/AddressStep.js"],"sourcesContent":["// shiprocket/src/app/components/AddressStep.js\r\n\r\nimport React, { useState } from 'react';\r\n\r\n// --- External Data: Comprehensive Country List ---\r\nconst COUNTRIES = [\r\n    { code: '', name: 'Select Country/Region *' }, // Placeholder\r\n    { code: 'IN', name: 'India' },\r\n    { code: 'US', name: 'United States' },\r\n    { code: 'GB', name: 'United Kingdom' },\r\n    { code: 'CA', name: 'Canada' },\r\n    { code: 'AU', name: 'Australia' },\r\n    { code: 'DE', name: 'Germany' },\r\n    { code: 'FR', name: 'France' },\r\n    { code: 'AE', name: 'United Arab Emirates' },\r\n    { code: 'SG', name: 'Singapore' },\r\n    // Add many more countries here...\r\n];\r\n// ------------------------------------------------\r\n\r\nconst AddressStep = ({ initialAddress, onAddressConfirm, userName }) => {\r\n    // Expanded state structure to handle all address fields\r\n    const [address, setAddress] = useState(initialAddress || {\r\n        country: '', \r\n        first_name: '',\r\n        last_name: '',\r\n        line1: '', \r\n        address2: '', \r\n        city: '',\r\n        state: '',\r\n        pincode: '',\r\n        saveInfo: true, \r\n    });\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value, type, checked } = e.target;\r\n        \r\n        setAddress(prev => ({ \r\n            ...prev, \r\n            [name]: type === 'checkbox' ? checked : value \r\n        }));\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        \r\n        // Input validation check for required fields\r\n        if (!address.country || address.country === '' || !address.first_name || !address.last_name || !address.line1 || !address.city || !address.state || !address.pincode) {\r\n            alert('Please fill in all required address fields (marked with *), including Country/Region.');\r\n            return;\r\n        }\r\n        \r\n        onAddressConfirm(address);\r\n    };\r\n\r\n    // Check if initialAddress exists and has the primary address line to confirm auto-fill\r\n    const isAddressAutoFilled = initialAddress && initialAddress.line1 !== '';\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n            <h3 className=\"text-2xl font-bold text-blue-600\">Delivery Address</h3>\r\n            \r\n            {/* Auto-fill Notification */}\r\n            {isAddressAutoFilled && (\r\n                <div className=\"p-4 bg-yellow-100 border border-yellow-300 rounded-lg text-sm font-semibold\">\r\n                    üëã Welcome back, {userName}! Your address is auto-filled.\r\n                </div>\r\n            )}\r\n\r\n            {/* Country/Region Selector */}\r\n            <select\r\n                name=\"country\"\r\n                value={address.country}\r\n                onChange={handleChange}\r\n                className=\"w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500\"\r\n                required\r\n            >\r\n                {COUNTRIES.map((country) => (\r\n                    <option \r\n                        key={country.code} \r\n                        value={country.code} \r\n                        disabled={country.code === ''}\r\n                    >\r\n                        {country.name}\r\n                    </option>\r\n                ))}\r\n            </select>\r\n            \r\n            {/* First Name and Last Name */}\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n                <input \r\n                    type=\"text\" name=\"first_name\" placeholder=\"First Name *\" \r\n                    value={address.first_name} onChange={handleChange} \r\n                    className=\"p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500\" \r\n                    required \r\n                />\r\n                <input \r\n                    type=\"text\" name=\"last_name\" placeholder=\"Last Name *\" \r\n                    value={address.last_name} onChange={handleChange} \r\n                    className=\"p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500\" \r\n                    required \r\n                />\r\n            </div>\r\n\r\n            {/* Address (Line 1) */}\r\n            <input \r\n                type=\"text\" \r\n                name=\"line1\" \r\n                placeholder=\"Address (Street, House No., Locality) *\" \r\n                value={address.line1} \r\n                onChange={handleChange} \r\n                className=\"w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500\" \r\n                required \r\n            />\r\n\r\n            {/* Address Line 2 (Apartment, suite, etc. - Optional field) */}\r\n            <input \r\n                type=\"text\" \r\n                name=\"address2\" \r\n                placeholder=\"Apartment, suite, building, etc. (Optional)\" \r\n                value={address.address2} \r\n                onChange={handleChange} \r\n                className=\"w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500\" \r\n            />\r\n\r\n            {/* City, State, Pincode */}\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n                <input \r\n                    type=\"text\" name=\"city\" placeholder=\"City *\" \r\n                    value={address.city} onChange={handleChange} \r\n                    className=\"p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500\" \r\n                    required \r\n                />\r\n                <input \r\n                    type=\"text\" name=\"state\" placeholder=\"State *\" \r\n                    value={address.state} onChange={handleChange} \r\n                    className=\"p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500\" \r\n                    required \r\n                />\r\n            </div>\r\n            <input \r\n                type=\"text\" name=\"pincode\" placeholder=\"Pincode *\" \r\n                value={address.pincode} onChange={handleChange} \r\n                className=\"w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500\" \r\n                required \r\n            />\r\n\r\n            {/* Save Information Checkbox */}\r\n            <div className=\"flex items-center pt-2\">\r\n                <input\r\n                    type=\"checkbox\"\r\n                    id=\"saveInfo\"\r\n                    name=\"saveInfo\"\r\n                    checked={address.saveInfo}\r\n                    onChange={handleChange}\r\n                    className=\"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\r\n                />\r\n                <label htmlFor=\"saveInfo\" className=\"ml-2 block text-base text-gray-900 font-medium\">\r\n                    Save this information for next time\r\n                </label>\r\n            </div>\r\n            \r\n            <button\r\n                type=\"submit\"\r\n                className=\"w-full bg-blue-600 text-white p-3 rounded-lg font-bold hover:bg-blue-700 mt-6\"\r\n            >\r\n                Proceed to Payment\r\n            </button>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default AddressStep;"],"names":["React","useState","COUNTRIES","code","name","AddressStep","t0","$","_c","$i","Symbol","for","initialAddress","onAddressConfirm","userName","t1","country","first_name","last_name","line1","address2","city","state","pincode","saveInfo","address","setAddress","t2","e","value","type","checked","target","prev","handleChange","t3","e_0","preventDefault","alert","handleSubmit","isAddressAutoFilled","t4","t5","t6","t7","map","_temp","t8","t9","t10","t11","t12","t13","t14","t15","t16","t17","t18","t19","t20","t21","t22"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 667, "column": 0}, "map": {"version":3,"sources":["C:/Users/admin/Desktop/next-shiprocket/shiprocket/src/app/components/PaymentStep.js"],"sourcesContent":["// shiprocket/src/app/components/PaymentStep.js\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faSpinner, faArrowLeft, faTimesCircle, faCheckCircle, faQrcode, faTag } from '@fortawesome/free-solid-svg-icons';\r\n\r\n// --- SIMULATED DISCOUNT LOGIC (Dynamic Promo Codes) ---\r\nconst verifyPromoCode = (code, subtotal) => {\r\n    const defaultDiscount = 50; // Base discount for prepaid orders\r\n    \r\n    const upperCaseCode = code.toUpperCase(); \r\n\r\n    if (upperCaseCode === 'FLAT100') {\r\n        return {\r\n            valid: true,\r\n            amount: 100, // Flat discount of 100\r\n            message: \"FLAT100 applied successfully! Saved ‚Çπ100.\",\r\n        };\r\n    } \r\n    if (upperCaseCode === 'FESTIVE10') {\r\n        const percentDiscount = Math.min(250, subtotal * 0.10); // 10% off, max ‚Çπ250\r\n        return {\r\n            valid: true,\r\n            amount: parseFloat(percentDiscount.toFixed(2)), \r\n            message: \"FESTIVE10 applied! 10% off (Max ‚Çπ250).\",\r\n        };\r\n    } \r\n    \r\n    if (code === '') {\r\n        return { valid: true, amount: defaultDiscount, message: \"Prepaid discount applied.\" };\r\n    }\r\n\r\n    return {\r\n        valid: false,\r\n        amount: 0,\r\n        message: \"Invalid or expired promo code.\",\r\n    };\r\n};\r\n\r\n\r\n// --- SIMULATED ORDER DATA (MODIFIED to accept Dynamic Discount) ---\r\nconst getSimulatedOrderData = (isCodSelected, initialOrderItems, appliedDiscountAmount) => {\r\n    const BASE_TOTAL = initialOrderItems.reduce((acc, item) => acc + (item.base_price * item.quantity), 0); \r\n    \r\n    const SHIPPING_CHARGE = 80;\r\n    const COD_CHARGE = 40;\r\n    const TAX_RATE = 0.05; \r\n\r\n    const subtotal = BASE_TOTAL;\r\n    \r\n    const discount = isCodSelected ? 0 : appliedDiscountAmount; \r\n\r\n    const taxableBase = subtotal - discount;\r\n    const taxAmount = parseFloat((taxableBase * TAX_RATE).toFixed(2));\r\n    \r\n    let finalTotal = taxableBase + SHIPPING_CHARGE + taxAmount;\r\n    \r\n    const paymentFee = isCodSelected ? COD_CHARGE : 0;\r\n    finalTotal += paymentFee;\r\n\r\n    return {\r\n        subtotal: subtotal, discount: discount, taxRate: TAX_RATE, taxAmount: taxAmount,\r\n        shipping: { method: 'Standard Shipping (3-5 days)', charge: SHIPPING_CHARGE, isFree: false, },\r\n        paymentFee: paymentFee, isCodSelected: isCodSelected,\r\n        totalPayable: parseFloat(finalTotal.toFixed(2)),\r\n    };\r\n};\r\n// ----------------------------------------------------------------------\r\n\r\n\r\n// ‚≠êÔ∏è NEW UI/UX COMPONENT: QR Code Overlay ‚≠êÔ∏è\r\nconst QrCodeOverlay = ({ totalPayable, onGoBack, onOrderPlace, isLoading }) => {\r\n    const [timeLeft, setTimeLeft] = useState(300); // 5 minutes in seconds\r\n    const [paymentStatus, setPaymentStatus] = useState('pending'); // pending, success, failed\r\n\r\n    useEffect(() => {\r\n        if (timeLeft <= 0 || paymentStatus !== 'pending') return;\r\n\r\n        const timerId = setInterval(() => {\r\n            setTimeLeft(prevTime => prevTime - 1);\r\n        }, 1000);\r\n\r\n        return () => clearInterval(timerId);\r\n    }, [timeLeft, paymentStatus]);\r\n\r\n    const minutes = Math.floor(timeLeft / 60);\r\n    const seconds = timeLeft % 60;\r\n    const formattedTime = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\r\n    \r\n    const mockUpiData = `upi://pay?pa=mockvpa@bank&pn=Merchant%20Name&mc=1234&tid=TID${Date.now()}&am=${totalPayable.toFixed(2)}&cu=INR`;\r\n    const qrCodeUrl = `https://chart.googleapis.com/chart?cht=qr&chs=250x250&chl=${encodeURIComponent(mockUpiData)}`;\r\n    \r\n    const handleManualConfirm = () => {\r\n        setPaymentStatus('success');\r\n        setTimeout(() => onOrderPlace(), 1000);\r\n    }\r\n    \r\n    let statusIcon, statusText, statusColor;\r\n    if (paymentStatus === 'pending') {\r\n        statusIcon = faQrcode;\r\n        statusText = `Scan the QR code to pay ‚Çπ${totalPayable.toFixed(2)}`;\r\n        statusColor = 'text-blue-600';\r\n    } else if (paymentStatus === 'success') {\r\n        statusIcon = faCheckCircle;\r\n        statusText = 'Payment Received! Finalizing order...';\r\n        statusColor = 'text-green-600';\r\n    } else {\r\n        statusIcon = faTimesCircle;\r\n        statusText = 'Payment Expired or Failed. Please retry.';\r\n        statusColor = 'text-red-600';\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-6 text-center\">\r\n            <button \r\n                onClick={onGoBack}\r\n                className=\"flex items-center text-gray-500 hover:text-gray-800 transition duration-150\"\r\n                disabled={paymentStatus !== 'pending'}\r\n            >\r\n                <FontAwesomeIcon icon={faArrowLeft} className=\"mr-2\" />\r\n                Back to Options\r\n            </button>\r\n            \r\n            <h3 className={`text-3xl font-extrabold ${statusColor}`}>\r\n                <FontAwesomeIcon icon={statusIcon} className=\"mr-3\" />\r\n                {statusText}\r\n            </h3>\r\n            \r\n            <div className=\"p-4 bg-white border border-gray-100 rounded-lg shadow-xl mx-auto max-w-xs\">\r\n                 <img src={qrCodeUrl} alt=\"UPI Payment QR Code\" className=\"w-full h-auto border p-2\" />\r\n            </div>\r\n            \r\n            <div className=\"font-semibold text-gray-700\">\r\n                <p>Total Payable: <span className=\"text-2xl font-bold text-red-600\">‚Çπ{totalPayable.toFixed(2)}</span></p>\r\n            </div>\r\n            \r\n            <div className={`p-3 rounded-lg font-bold mx-auto w-3/4 ${paymentStatus === 'pending' ? 'bg-yellow-100 text-yellow-800' : 'bg-gray-100 text-gray-500'}`}>\r\n                {paymentStatus === 'pending' ? (\r\n                    `Time Remaining: ${formattedTime}`\r\n                ) : (\r\n                    'Payment gateway finalized.'\r\n                )}\r\n            </div>\r\n            \r\n            {paymentStatus === 'pending' && (\r\n                 <button\r\n                    onClick={handleManualConfirm} \r\n                    disabled={isLoading || timeLeft <= 0}\r\n                    className=\"w-full bg-green-600 text-white p-3 rounded-lg font-bold text-lg hover:bg-green-700 disabled:bg-gray-400 flex items-center justify-center shadow-lg\"\r\n                >\r\n                    {isLoading ? (\r\n                        <>\r\n                            <FontAwesomeIcon icon={faSpinner} spin className=\"mr-2\" />\r\n                            Checking Payment Status...\r\n                        </>\r\n                    ) : (\r\n                        'I have Paid - Confirm Order'\r\n                    )}\r\n                </button>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n// ----------------------------------------------------------------------\r\n\r\n\r\nconst PaymentStep = ({ onOrderPlace, onFinalizeAddress, isLoading, initialOrderItems }) => {\r\n    const [selectedPayment, setSelectedPayment] = useState('prepaid');\r\n    const [showQrCode, setShowQrCode] = useState(false); \r\n    \r\n    // ‚≠êÔ∏è NEW DISCOUNT STATES ‚≠êÔ∏è\r\n    const [promoCode, setPromoCode] = useState('');\r\n    const [appliedDiscount, setAppliedDiscount] = useState({ \r\n        amount: 50, // Default prepaid discount\r\n        message: 'Prepaid discount applied.',\r\n        valid: true \r\n    });\r\n\r\n    // üî¥ FIX: Define the banner object here to fix \"banner is not defined\" error\r\n    const banner = {\r\n        bgColor: '#F74435', \r\n        textColor: '#FFFFFF',\r\n        text: 'Prepaid 5% discount | COD Rs.40 Extra',\r\n    };\r\n    // -------------------------------------------------------------------\r\n\r\n    const isCodSelected = selectedPayment === 'cod';\r\n    const subtotal = initialOrderItems.reduce((acc, item) => acc + (item.base_price * item.quantity), 0); \r\n    \r\n    const effectiveDiscountAmount = isCodSelected ? 0 : appliedDiscount.amount;\r\n    \r\n    const orderDetails = getSimulatedOrderData(isCodSelected, initialOrderItems, effectiveDiscountAmount);\r\n    const { \r\n        taxAmount, shipping, paymentFee, totalPayable \r\n    } = orderDetails;\r\n\r\n    // --- EFFECT: Update Parent State on Change ---\r\n    useEffect(() => {\r\n        onFinalizeAddress(prev => ({ ...prev, paymentDetails: orderDetails }));\r\n    }, [isCodSelected, onFinalizeAddress, orderDetails]);\r\n    \r\n    // --- EFFECT: Recalculate default discount when changing payment method ---\r\n    useEffect(() => {\r\n        if (!isCodSelected) {\r\n            if (promoCode === '') {\r\n                 setAppliedDiscount(verifyPromoCode('', subtotal));\r\n            } else {\r\n                 handleApplyPromo();\r\n            }\r\n        } else {\r\n            setAppliedDiscount({ amount: 0, message: \"No discount applied for COD.\", valid: true });\r\n        }\r\n    }, [isCodSelected]); \r\n\r\n\r\n    // ‚≠êÔ∏è NEW HANDLER: Apply Promo Code ‚≠êÔ∏è\r\n    const handleApplyPromo = () => {\r\n        if (isCodSelected) {\r\n            alert(\"Promo codes are only applicable for Prepaid orders.\");\r\n            return;\r\n        }\r\n        if (promoCode === '') {\r\n             setAppliedDiscount(verifyPromoCode('', subtotal));\r\n             return;\r\n        }\r\n        \r\n        const result = verifyPromoCode(promoCode, subtotal);\r\n        setAppliedDiscount(result);\r\n    };\r\n\r\n\r\n    const buttonBg = isCodSelected \r\n        ? 'bg-orange-600 hover:bg-orange-700 disabled:bg-orange-400' \r\n        : 'bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400';\r\n    \r\n    const buttonText = isCodSelected \r\n        ? `Confirm COD Order for ‚Çπ${totalPayable.toFixed(2)}` \r\n        : `Pay ‚Çπ${totalPayable.toFixed(2)} & Complete Order`;\r\n\r\n    const paymentOptions = [\r\n        { id: 'prepaid', label: 'UPI / Card / NetBanking (Recommended)' },\r\n        { id: 'cod', label: 'Cash on Delivery (COD)' },\r\n    ];\r\n    \r\n    const handlePaymentAction = () => {\r\n        if (isCodSelected) {\r\n            onOrderPlace();\r\n        } else {\r\n            setShowQrCode(true);\r\n        }\r\n    };\r\n    \r\n    if (showQrCode) {\r\n        return (\r\n            <QrCodeOverlay \r\n                totalPayable={totalPayable}\r\n                onGoBack={() => setShowQrCode(false)}\r\n                onOrderPlace={onOrderPlace}\r\n                isLoading={isLoading}\r\n            />\r\n        );\r\n    }\r\n\r\n    // --- Default Payment Selection Screen Rendering ---\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <h3 className=\"text-2xl font-bold text-blue-600\">Payment Options</h3>\r\n\r\n            {/* Dynamic Banner */}\r\n            <div \r\n                style={{ backgroundColor: banner.bgColor, color: banner.textColor }}\r\n                className=\"p-3 text-center text-sm font-semibold rounded-lg shadow-md\"\r\n            >\r\n                {banner.text}\r\n            </div>\r\n            \r\n            {/* ‚≠êÔ∏è NEW: Discount Input Field ‚≠êÔ∏è */}\r\n            <div className=\"border p-4 rounded-lg shadow-sm space-y-2\">\r\n                <h4 className=\"font-bold text-gray-800 flex items-center\">\r\n                    <FontAwesomeIcon icon={faTag} className=\"mr-2 text-blue-500\" />\r\n                    Have a Promo Code? (FLAT100 / FESTIVE10)\r\n                </h4>\r\n                <div className=\"flex space-x-2\">\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Enter Code\"\r\n                        value={promoCode}\r\n                        onChange={(e) => setPromoCode(e.target.value)}\r\n                        className=\"flex-grow p-2 border-2 border-gray-300 rounded-lg focus:border-blue-500\"\r\n                        disabled={isCodSelected}\r\n                    />\r\n                    <button\r\n                        onClick={handleApplyPromo}\r\n                        disabled={isLoading || isCodSelected}\r\n                        className={`p-2 rounded-lg font-semibold text-white transition duration-150 ${\r\n                            isCodSelected ? 'bg-gray-400' : 'bg-green-600 hover:bg-green-700'\r\n                        }`}\r\n                    >\r\n                        Apply\r\n                    </button>\r\n                </div>\r\n                {/* Discount Message */}\r\n                <p className={`text-sm ${appliedDiscount.valid ? 'text-green-600' : 'text-red-600'}`}>\r\n                    {appliedDiscount.message}\r\n                </p>\r\n            </div>\r\n            {/* End Discount Input Field */}\r\n\r\n\r\n            {/* Payment Options Selection */}\r\n            <div className=\"space-y-3\">\r\n                {paymentOptions.map((option) => (\r\n                    <label \r\n                        key={option.id} \r\n                        className={`flex justify-between items-center p-4 border-2 rounded-lg cursor-pointer transition-all ${\r\n                            selectedPayment === option.id \r\n                            ? 'border-blue-600 bg-blue-50 shadow-sm' \r\n                            : 'border-gray-300'\r\n                        }`}\r\n                    >\r\n                        <span className=\"ml-3 font-medium text-gray-700\">{option.label}</span>\r\n                         <input\r\n                            type=\"radio\"\r\n                            name=\"payment\"\r\n                            value={option.id}\r\n                            checked={selectedPayment === option.id}\r\n                            onChange={(e) => setSelectedPayment(e.target.value)}\r\n                            className=\"h-5 w-5 text-blue-600 focus:ring-blue-500\"\r\n                        />\r\n                    </label>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Order Summary */}\r\n            <div className=\"border-t pt-4 space-y-2 text-sm\">\r\n                <p className=\"flex justify-between font-medium\"><span>Subtotal (Items):</span> <span>‚Çπ{subtotal.toFixed(2)}</span></p>\r\n                \r\n                <p className=\"flex justify-between font-medium\" style={{ color: effectiveDiscountAmount > 0 ? '#10B981' : '#EF4444' }}>\r\n                    <span>Discount Applied:</span> <span>- ‚Çπ{effectiveDiscountAmount.toFixed(2)}</span>\r\n                </p>\r\n\r\n                <p className=\"flex justify-between font-medium text-gray-700\">\r\n                    <span>Shipping ({shipping.method}):</span> <span>+ ‚Çπ{shipping.charge.toFixed(2)}</span>\r\n                </p>\r\n                <p className=\"flex justify-between font-medium text-gray-700\">\r\n                    <span>Taxes ({(orderDetails.taxRate * 100).toFixed(0)}%):</span> <span>+ ‚Çπ{taxAmount.toFixed(2)}</span>\r\n                </p>\r\n                {paymentFee > 0 && (\r\n                    <p className=\"flex justify-between text-red-600 font-semibold\">\r\n                        <span>COD Convenience Fee:</span> <span>+ ‚Çπ{paymentFee.toFixed(2)}</span>\r\n                    </p>\r\n                )}\r\n                <p className=\"flex justify-between text-xl font-extrabold border-t-2 pt-2\">\r\n                    <span>Total Payable:</span> <span className=\"text-red-600\">‚Çπ{totalPayable.toFixed(2)}</span>\r\n                </p>\r\n            </div>\r\n\r\n            <button\r\n                onClick={handlePaymentAction}\r\n                disabled={isLoading}\r\n                className={`w-full text-white p-3 rounded-lg font-bold text-lg shadow-lg flex items-center justify-center ${buttonBg}`}\r\n            >\r\n                {isLoading ? (\r\n                    <>\r\n                        <FontAwesomeIcon icon={faSpinner} spin className=\"mr-2\" />\r\n                        Processing...\r\n                    </>\r\n                ) : (\r\n                    buttonText\r\n                )}\r\n            </button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PaymentStep;"],"names":["React","useState","useEffect","FontAwesomeIcon","faSpinner","faArrowLeft","faTimesCircle","faCheckCircle","faQrcode","faTag","verifyPromoCode","code","subtotal","defaultDiscount","upperCaseCode","toUpperCase","valid","amount","message","percentDiscount","Math","min","parseFloat","toFixed","getSimulatedOrderData","isCodSelected","initialOrderItems","appliedDiscountAmount","BASE_TOTAL","reduce","acc","item","base_price","quantity","SHIPPING_CHARGE","COD_CHARGE","TAX_RATE","discount","taxableBase","taxAmount","finalTotal","paymentFee","taxRate","shipping","method","charge","isFree","totalPayable","QrCodeOverlay","t0","$","_c","$i","Symbol","for","onGoBack","onOrderPlace","isLoading","timeLeft","setTimeLeft","paymentStatus","setPaymentStatus","t1","t2","timerId","setInterval","_temp","clearInterval","minutes","floor","seconds","t3","toString","padStart","t4","formattedTime","t5","Date","now","t6","mockUpiData","qrCodeUrl","encodeURIComponent","t7","setTimeout","handleManualConfirm","statusIcon","statusText","statusColor","t8","t9","t10","t11","t12","t13","t14","t15","t16","t17","t18","t19","t20","t21","PaymentStep","onFinalizeAddress","selectedPayment","setSelectedPayment","showQrCode","setShowQrCode","promoCode","setPromoCode","appliedDiscount","setAppliedDiscount","banner","bgColor","textColor","text","effectiveDiscountAmount","orderDetails","prev","paymentDetails","handleApplyPromo","alert","result","buttonBg","buttonText","paymentOptions","id","label","handlePaymentAction","backgroundColor","color","e","target","value","map","option","prevTime"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 1535, "column": 0}, "map": {"version":3,"sources":["C:/Users/admin/Desktop/next-shiprocket/shiprocket/src/app/components/CheckoutLayout.js"],"sourcesContent":["// shiprocket/src/app/components/CheckoutLayout.js\r\n\r\n\"use client\"; \r\n\r\nimport React, { useState } from 'react';\r\nimport LoginStep from './LoginStep';\r\nimport AddressStep from './AddressStep';\r\nimport PaymentStep from './PaymentStep';\r\n\r\nconst STEPS = {\r\n    LOGIN: 1,\r\n    ADDRESS: 2,\r\n    PAYMENT: 3,\r\n};\r\n\r\nconst CheckoutLayout = () => {\r\n    const [currentStep, setCurrentStep] = useState(STEPS.LOGIN);\r\n    const [userData, setUserData] = useState(null); \r\n    const [addressData, setAddressData] = useState(null); \r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    // üî¥ 1. CRITICAL: Item details for Shopify. REPLACE VARIANT_ID and NAME.\r\n    const [initialOrderItems] = useState([{\r\n        // Example product with base price (1250)\r\n        variant_id: 45678901234567, // <--- REPLACE THIS WITH A VALID VARIANT ID\r\n        name: \"Shiprocket Integration Service\", \r\n        quantity: 1,\r\n        base_price: 1250 \r\n    }]);\r\n\r\n    const handleLoginSuccess = (data) => {\r\n        setUserData(data);\r\n        if (data.address_found) {\r\n            setAddressData(data.address);\r\n        }\r\n        setCurrentStep(STEPS.ADDRESS);\r\n    };\r\n\r\n    const handleAddressConfirm = (data) => {\r\n        setAddressData(data);\r\n        setCurrentStep(STEPS.PAYMENT);\r\n    };\r\n\r\n    // --- API Call to Simulated MongoDB & Shopify Backend ---\r\n    const handleOrderPlace = async () => {\r\n        \r\n        if (!userData || !addressData || !addressData.paymentDetails) {\r\n            alert(\"Error: Missing user or payment data.\");\r\n            return;\r\n        }\r\n\r\n        setIsLoading(true); \r\n\r\n        const orderDataToSend = {\r\n            userId: userData.mobile,\r\n            userName: userData.name,\r\n            shippingAddress: addressData,\r\n            paymentSummary: addressData.paymentDetails,\r\n            orderItems: initialOrderItems, \r\n            status: \"Processing\"\r\n        };\r\n        \r\n        const finalTotal = addressData.paymentDetails.totalPayable.toFixed(2);\r\n        \r\n        try {\r\n            const response = await fetch('/api/place-order', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify(orderDataToSend)\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const errorData = await response.json();\r\n                throw new Error(errorData.detailedError || errorData.message || `HTTP error! Status: ${response.status}`);\r\n            }\r\n\r\n            const result = await response.json();\r\n            \r\n            alert(`‚úÖ Order Placed Successfully! Shopify ID: ${result.shopifyId}. Final Total: ‚Çπ${finalTotal}.`);\r\n            \r\n            // Reset state after successful order placement\r\n            setUserData(null);\r\n            setAddressData(null);\r\n            setCurrentStep(STEPS.LOGIN);\r\n\r\n        } catch (error) {\r\n            console.error(\"Error placing order:\", error);\r\n            alert(`‚ùå Order failed due to a server/API error. Details: ${error.message}`);\r\n        } finally {\r\n            setIsLoading(false); \r\n        }\r\n    };\r\n    // -------------------------------------------------------------\r\n\r\n    const renderStep = () => {\r\n        switch (currentStep) {\r\n            case STEPS.LOGIN:\r\n                return <LoginStep onLoginSuccess={handleLoginSuccess} />;\r\n            case STEPS.ADDRESS:\r\n                return (\r\n                    <AddressStep \r\n                        initialAddress={addressData} \r\n                        onAddressConfirm={handleAddressConfirm} \r\n                        userName={userData?.name || \"Customer\"}\r\n                    />\r\n                );\r\n            case STEPS.PAYMENT:\r\n                return (\r\n                    <PaymentStep \r\n                        onOrderPlace={handleOrderPlace} \r\n                        initialOrderItems={initialOrderItems}\r\n                        onFinalizeAddress={setAddressData}\r\n                        isLoading={isLoading} \r\n                    />\r\n                );\r\n            default:\r\n                return <LoginStep onLoginSuccess={handleLoginSuccess} />;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"w-full max-w-xl mx-auto p-4\">\r\n            <h1 className=\"text-3xl font-bold text-center mb-6 text-gray-800\">\r\n                üöÄ Custom Fast Checkout ({currentStep}/3)\r\n            </h1>\r\n            \r\n            <div className=\"bg-white shadow-2xl rounded-xl p-6\">\r\n                {renderStep()}\r\n            </div>\r\n            \r\n            {/* üî¥ NEW: Security and Trust Indicators */}\r\n            <div className=\"mt-6 p-3 bg-white border border-green-200 rounded-lg text-center text-sm shadow-md\">\r\n                <p className=\"font-bold text-green-700\">üîí 100% Secure Checkout</p>\r\n                <p className=\"text-gray-500 mt-1\">\r\n                    All payments are encrypted. 7-Day Easy Return Guarantee applies.\r\n                </p>\r\n            </div>\r\n            \r\n            <div className=\"mt-4 text-center text-xs text-gray-500\">\r\n                <p>Note: Check your server terminal for Shopify API errors (SHOPIFY ERROR DETAILS).</p>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CheckoutLayout;"],"names":["React","useState","LoginStep","AddressStep","PaymentStep","STEPS","LOGIN","ADDRESS","PAYMENT","CheckoutLayout","currentStep","setCurrentStep","userData","setUserData","addressData","setAddressData","isLoading","setIsLoading","initialOrderItems","variant_id","name","quantity","base_price","handleLoginSuccess","data","address_found","address","handleAddressConfirm","handleOrderPlace","paymentDetails","alert","orderDataToSend","userId","mobile","userName","shippingAddress","paymentSummary","orderItems","status","finalTotal","totalPayable","toFixed","response","fetch","method","headers","body","JSON","stringify","ok","errorData","json","Error","detailedError","message","result","shopifyId","error","console","renderStep"],"mappings":"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","ignoreList":[]}}]
}