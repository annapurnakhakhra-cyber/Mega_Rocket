(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,59734,e=>{"use strict";var s=e.i(43476),t=e.i(71645);function a(){let[e,a]=(0,t.useState)([]),[r,l]=(0,t.useState)(!0),[i,n]=(0,t.useState)(null),[c,d]=(0,t.useState)({}),[o,x]=(0,t.useState)([]),[m,u]=(0,t.useState)({total:0,totalValue:0,averageValue:0}),[h,g]=(0,t.useState)(null),[p,b]=(0,t.useState)(""),[y,j]=(0,t.useState)(!1),[N,f]=(0,t.useState)(!1),[v,w]=(0,t.useState)(null),[k,S]=(0,t.useState)(!1),[C,L]=(0,t.useState)(""),[A,T]=(0,t.useState)("All"),[E,$]=(0,t.useState)(null),[M,F]=(0,t.useState)(!0),[R,I]=(0,t.useState)(!1),P=(0,t.useCallback)(async(s=!1,t=null)=>{try{s?I(!0):(a([]),$(null),l(!0)),n(null);let r=new URLSearchParams({limit:"50"});t&&r.append("after",t);let i=await fetch(`/api/abandoned-checkouts?${r}`);if(!i.ok)throw Error(`HTTP error! status: ${i.status}`);let c=await i.json();if(c.success){let t=c.data.map(e=>({id:e.id.split("/").pop(),createdAt:e.timestamp,customer:e.customerName,email:e.email,region:"India",emailStatus:"Not Sent",recoveryStatus:"Not Recovered",total:e.totalValue,totalNumeric:e.totalNumeric,recoveryLink:e.recoveryUrl,items:e.items.map(e=>({title:`${e.title} - ${e.variant}`,sku:"SKU: N/A",price:e.unitPrice,priceNumeric:parseFloat(e.unitPrice.split(" ")[1])||0,quantity:e.quantity,image:e.image||"/placeholder-image.jpg"}))})),r=s?[...e,...t]:t;a(r),U(r),$(c.pageInfo?.endCursor||null),F(50===c.data.length&&!!c.pageInfo?.hasNextPage),B(s?"More checkouts loaded successfully":"Checkouts loaded successfully","success")}else n(c.error||"Unknown error occurred"),B(c.error,"error")}catch(e){n("Fetch failed: "+e.message),B("Failed to load checkouts: "+e.message,"error")}finally{l(!1),I(!1)}},[e]);(0,t.useEffect)(()=>{P(!1)},[]);let D=()=>P(!1),O=(0,t.useCallback)(async s=>{let t=e.find(e=>e.id===s);return t?(S(!1),{...t,store:"Online store",orders:"No orders",account:"No email"!==t.email?"Has account":"No account",shippingAddress:"Shipping address not available\nCity, State\nIndia",billingAddress:"Same as shipping address",notes:"",subscribedEmail:!1,subscribedSMS:!1,subtotalNumeric:.95*t.totalNumeric,shippingNumeric:.05*t.totalNumeric,cgstNumeric:.025*t.totalNumeric,sgstNumeric:.025*t.totalNumeric}):{id:s,createdAt:new Date().toISOString(),customer:"Fallback Customer",email:"fallback@example.com",region:"India",emailStatus:"Not Sent",recoveryStatus:"Not Recovered",store:"Online store",orders:"No orders",account:"No account",subscribedEmail:!1,subscribedSMS:!1,notes:"",totalNumeric:100,subtotalNumeric:95,shippingNumeric:5,cgstNumeric:2.5,sgstNumeric:2.5,shippingAddress:"Fallback Address\n12345 City State\nIndia",billingAddress:"Same as shipping address",recoveryLink:`https://example.com/checkouts/${s}/recover`,items:[{title:"Fallback Item",sku:"SKU: FALLBACK",priceNumeric:100,quantity:1,image:"/placeholder-image.jpg"}]}},[e]),U=e=>{let s=e.length,t=e.reduce((e,s)=>e+(s.totalNumeric||0),0);u({total:s,totalValue:t,averageValue:s>0?t/s:0})},V=e.filter(e=>{let s=e.customer?.toLowerCase().includes(C.toLowerCase())||e.id?.toLowerCase().includes(C.toLowerCase())||e.email?.toLowerCase().includes(C.toLowerCase()),t="All"===A||e.emailStatus===A;return s&&t}),B=(e,s="info",t=!0)=>{let a=Date.now(),r={id:a,message:e,type:s};x(e=>[...e,r]),t&&setTimeout(()=>z(a),5e3)},z=e=>x(s=>s.filter(s=>s.id!==e)),H=async e=>{w(await O(e.id)),f(!0)},W=async()=>{if(!h)return;let e=h.id;d(s=>({...s,[e]:!0}));try{let s=await fetch("/api/recover-cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({checkoutId:e,email:p,subject:`Complete Your Purchase - ${h.customer||"Customer"}`,message:`Hi ${h.customer||"there"},

We noticed you left items in your cart worth ${h.total}:

Complete your purchase here:
${h.recoveryLink||`https://example.com/checkouts/${e}`}

Thank you,
The Store Team`})}),t=await s.json();t.success?(B(`Recovery email sent to ${p}`,"success"),a(s=>s.map(s=>s.id===e?{...s,emailStatus:"Sent",recoveryStatus:"In Progress"}:s))):B(t.message||"Failed to send email","error")}catch(e){B("Failed to send recovery email: "+e.message,"error")}finally{d(s=>({...s,[e]:!1})),j(!1),g(null)}},K=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}).format(e);return r?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 p-4 md:p-8",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto flex flex-col items-center justify-center min-h-[60vh]",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-600 border-t-transparent"}),(0,s.jsx)("span",{className:"mt-4 text-lg text-gray-700 font-medium",children:"Loading abandoned checkouts..."}),(0,s.jsx)("p",{className:"mt-2 text-gray-500",children:"Fetching data from Shopify"})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 p-4 md:p-8",children:[(0,s.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-md",children:o.map(e=>(0,s.jsx)("div",{className:`p-4 rounded-lg shadow-lg border-l-4 ${"success"===e.type?"bg-green-50 border-green-500 text-green-800":"error"===e.type?"bg-red-50 border-red-500 text-red-800":"bg-blue-50 border-blue-500 text-blue-800"}`,children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)("p",{className:"font-medium",children:e.message}),(0,s.jsx)("button",{onClick:()=>z(e.id),className:"ml-4 text-gray-500 hover:text-gray-700",children:"âœ•"})]})},e.id))}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900",children:"Abandoned Checkouts"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Recover lost sales by reaching out to customers"})]}),(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsxs)("button",{onClick:D,className:"flex items-center gap-2 px-4 py-2.5 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,s.jsxs)("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Abandoned"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:m.total})]}),(0,s.jsxs)("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Potential Revenue"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-green-600 mt-2",children:K(m.totalValue)})]}),(0,s.jsxs)("div",{className:"bg-white p-5 rounded-xl border border-gray-200 shadow-sm",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Average Cart Value"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:K(m.averageValue)})]})]}),i&&(0,s.jsx)("div",{className:"mb-8 bg-red-50 border border-red-200 rounded-xl p-6",children:(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("svg",{className:"h-6 w-6 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-red-800",children:"Error Loading Checkouts"}),(0,s.jsx)("div",{className:"mt-2 text-red-700",children:(0,s.jsx)("p",{children:i})}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("button",{onClick:D,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})})]})]})}),!i&&(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:"ðŸ›’ Abandoned checkouts"}),(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:["( ",V.length," )"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",placeholder:"Search...",value:C,onChange:e=>L(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,s.jsx)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,s.jsxs)("select",{value:A,onChange:e=>T(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,s.jsx)("option",{children:"All"}),(0,s.jsx)("option",{children:"Not Sent"}),(0,s.jsx)("option",{children:"Sent"})]}),(0,s.jsx)("button",{onClick:()=>{B("Exporting data...","info"),console.log("Export triggered")},className:"px-4 py-2 bg-black text-white rounded-lg text-sm hover:bg-gray-800 transition-colors",children:"Export"})]})]}),(0,s.jsx)("div",{className:"overflow-y-auto max-h-[60vh]",children:(0,s.jsxs)("table",{className:"w-full table-auto divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,s.jsx)("input",{type:"checkbox",className:"rounded"})}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Checkout"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Region"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email Status"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Recovery Status"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===V.length?(0,s.jsx)("tr",{children:(0,s.jsxs)("td",{colSpan:8,className:"px-6 py-12 text-center text-gray-500",children:[(0,s.jsx)("div",{className:"text-green-500 text-6xl mb-4",children:"âœ“"}),(0,s.jsx)("h3",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"No Abandoned Checkouts"}),(0,s.jsx)("p",{className:"mb-6",children:"All carts have been recovered or completed."}),(0,s.jsx)("button",{onClick:D,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Check Again"})]})}):V.map((e,t)=>{let a,r,l;return(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,s.jsx)("input",{type:"checkbox",className:"rounded"})}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,s.jsxs)("button",{onClick:()=>H(e),className:"text-sm font-medium text-blue-600 hover:text-blue-900 underline",children:["#",e.id]})}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:(a=new Date(e.createdAt),r=Math.floor((new Date-a)/864e5),l=a.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),0===r?l.toLowerCase():1===r?`Yesterday at ${l.toLowerCase()}`:`${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][a.getDay()]} at ${l.toLowerCase()}`)}),(0,s.jsx)("td",{className:"px-4 py-4 max-w-xs",children:(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:e.customer})}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:e.region}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${"Not Sent"===e.emailStatus?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"}`,children:e.emailStatus})}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${"Not Recovered"===e.recoveryStatus?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"}`,children:e.recoveryStatus})}),(0,s.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:(0,s.jsx)("div",{className:"font-bold",children:e.total})})]},e.id||t)})})]})}),V.length>0&&(0,s.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center",children:[(0,s.jsx)("a",{href:"#",className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Learn more about abandoned checkouts"}),M&&(0,s.jsx)("button",{onClick:()=>{E&&M&&P(!0,E)},disabled:R,className:"text-sm text-blue-600 hover:text-blue-800 disabled:opacity-50",children:R?"Loading...":"Load More"}),(0,s.jsx)("button",{className:"text-sm text-gray-500 hover:text-gray-700",children:"+"})]})]}),N&&v&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:["#",v.id]}),(0,s.jsx)("span",{className:"inline-flex px-3 py-1 text-xs font-semibold rounded-full bg-orange-100 text-orange-800",children:v.recoveryStatus}),(0,s.jsx)("span",{className:"inline-flex px-3 py-1 text-xs font-semibold rounded-full bg-orange-100 text-orange-800 ml-2",children:v.emailStatus})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>{let e;return e=v.recoveryLink||`https://example.com/checkouts/${v.id}`,void window.open(e,"_blank")},className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-900",children:"Print"}),(0,s.jsx)("button",{onClick:()=>{f(!1),w(null)},className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]})]}),(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,s.jsx)("span",{children:v.region}),(0,s.jsx)("span",{children:"â€¢"}),(0,s.jsxs)("span",{children:[new Date(v.createdAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})," at ",new Date(v.createdAt).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).toLowerCase()]})]})}),(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-blue-50",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-blue-500 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Email your customer this link to recover their cart"}),(0,s.jsx)("div",{className:"bg-white p-3 rounded-lg border border-blue-200",children:(0,s.jsx)("input",{type:"text",value:v.recoveryLink,readOnly:!0,className:"w-full text-sm bg-transparent border-0 focus:outline-none"})}),(0,s.jsx)("button",{onClick:()=>{g(v),b(v.email||""),j(!0)},className:"mt-2 px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700",children:"Send a cart recovery email"})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 p-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Checkout details"}),(0,s.jsxs)("div",{className:"space-y-4",children:[v.items.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)("img",{src:e.image,alt:e.title,className:"w-16 h-16 rounded object-cover flex-shrink-0"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:e.sku})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[e.price," Ã— ",e.quantity]}),(0,s.jsx)("p",{className:"text-sm text-gray-900 font-bold",children:e.price})]})]},t)),(0,s.jsxs)("div",{className:"space-y-2 pt-4 border-t border-gray-200",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Subtotal"}),(0,s.jsx)("span",{children:K(v.subtotalNumeric)})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Shipping"}),(0,s.jsxs)("span",{children:["Standard (0 kg) ",K(v.shippingNumeric)]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Estimated tax"}),(0,s.jsxs)("span",{children:["CGST 2.5% ",K(v.cgstNumeric)]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{}),(0,s.jsxs)("span",{children:["SGST 2.5% ",K(v.sgstNumeric)]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-lg font-bold pt-2 border-t border-gray-200",children:[(0,s.jsx)("span",{children:"Total to be paid by customer"}),(0,s.jsx)("span",{children:v.total})]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:(0,s.jsxs)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:["From ",v.store]})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Customer"}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:v.customer}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:v.orders})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Contact information"}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm text-gray-900",children:v.email}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:v.account})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Shipping address"}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,s.jsx)("pre",{className:"text-sm whitespace-pre-wrap",children:v.shippingAddress}),(0,s.jsx)("button",{className:"mt-2 text-xs text-blue-600 hover:underline",children:"Edit"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Billing address"}),(0,s.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm text-gray-500",children:v.billingAddress})})]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 p-6 border-t border-gray-200",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Notes"}),(0,s.jsx)("textarea",{placeholder:"Add a note to this checkout",defaultValue:v.notes,className:"w-full p-3 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3}),(0,s.jsx)("button",{className:"mt-2 px-4 py-2 bg-gray-600 text-white text-sm rounded-lg hover:bg-gray-700",children:"Save"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Marketing"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"flex items-center text-sm",children:[(0,s.jsx)("input",{type:"checkbox",className:"rounded mr-2",checked:v.subscribedEmail,readOnly:!0}),(0,s.jsx)("span",{children:v.subscribedEmail?"Email subscribed":"Email not subscribed"})]}),(0,s.jsxs)("label",{className:"flex items-center text-sm",children:[(0,s.jsx)("input",{type:"checkbox",className:"rounded mr-2",checked:v.subscribedSMS,readOnly:!0}),(0,s.jsx)("span",{children:v.subscribedSMS?"SMS subscribed":"SMS not subscribed"})]})]})]})]})]})}),y&&h&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Send Recovery Email"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Email"}),(0,s.jsx)("input",{type:"email",value:p,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter email address"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Default: ",h.email]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"This will send a recovery email with a link back to the cart containing:"}),(0,s.jsxs)("ul",{className:"mt-2 text-sm text-gray-700 list-disc pl-5 space-y-1",children:[(0,s.jsxs)("li",{children:[h.items?.length||1," item(s)"]}),(0,s.jsxs)("li",{children:["Total value: ",h.total]}),(0,s.jsxs)("li",{children:["Customer: ",h.customer]})]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:W,disabled:c[h.id]||!p,className:`flex-1 px-4 py-3 rounded-lg font-medium ${c[h.id]||!p?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:c[h.id]?(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Sending..."]}):"Send Email"}),(0,s.jsx)("button",{onClick:()=>{j(!1),g(null)},className:"px-4 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"})]})]})})]})]})}e.s(["default",()=>a])}]);