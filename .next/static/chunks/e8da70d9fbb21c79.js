(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78631,(e,t,o)=>{!function(t,o){if("function"==typeof define&&define.amd){let t;void 0!==(t=o())&&e.v(t)}else o()}(e.e,function(){"use strict";function o(e,t,o){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){i(r.response,t,o)},r.onerror=function(){console.error("could not download file")},r.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function n(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(o){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var d="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:e.g.global===e.g?e.g:void 0,l=d.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),i=d.saveAs||("object"!=typeof window||window!==d?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(e,t,l){var i=d.URL||d.webkitURL,a=document.createElement("a");a.download=t=t||e.name||"download",a.rel="noopener","string"==typeof e?(a.href=e,a.origin===location.origin?n(a):r(a.href)?o(e,t,l):n(a,a.target="_blank")):(a.href=i.createObjectURL(e),setTimeout(function(){i.revokeObjectURL(a.href)},4e4),setTimeout(function(){n(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,d){if(t=t||e.name||"download","string"!=typeof e){var l;navigator.msSaveOrOpenBlob((void 0===(l=d)?l={autoBom:!1}:"object"!=typeof l&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e),t)}else if(r(e))o(e,t,d);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout(function(){n(i)})}}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof e)return o(e,t,r);var i="application/octet-stream"===e.type,a=/constructor/i.test(d.HTMLElement)||d.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&a||l)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=s?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=e:location=e,n=null},c.readAsDataURL(e)}else{var p=d.URL||d.webkitURL,u=p.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){p.revokeObjectURL(u)},4e4)}});d.saveAs=i.saveAs=i,t.exports=i})},48086,e=>{"use strict";var t=e.i(47167),o=e.i(43476),r=e.i(71645),n=e.i(78631);e.s(["default",0,()=>{let e=t.default.env.NEXT_PUBLIC_API_URL||"http://your-backend-url.com",[d,l]=(0,r.useState)("maitri-kh.myshopify.com"),[i,a]=(0,r.useState)(""),[s,c]=(0,r.useState)(""),[p,u]=(0,r.useState)(!1),[g,x]=(0,r.useState)(""),[h,f]=(0,r.useState)([]),[m,b]=(0,r.useState)([]),y=`${e}/allorderget.php`,v=async()=>{if(!d)return void x("Please enter a shop domain");u(!0),x("");try{let e=`${y}?shop=${d}`,t=await fetch(e);if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);let o=await t.json();if(o.error)throw Error(o.error);let r=o.data.orders.edges.map(e=>{let t=e.node;return{id:t.id.split("/").pop(),name:t.name,date:t.createdAt.slice(0,10),customer:`${t.customer?.firstName||""} ${t.customer?.lastName||""}`.trim()||"Guest",email:t.customer?.email||"N/A",total:parseFloat(t.totalPriceSet.shopMoney.amount).toFixed(2),discount:parseFloat(t.totalDiscountsSet.shopMoney.amount).toFixed(2),status:t.displayFinancialStatus,payment:t.paymentGatewayNames.join(", ")||"N/A",shipping:t.shippingLines.edges[0]?.node.title||"N/A",items:t.lineItems.edges.map(e=>({product:e.node.title,quantity:e.node.quantity}))}});b(r);let n=[...r];(i||s)&&(n=r.filter(e=>{let t=new Date(e.date),o=i?new Date(i):null,r=s?new Date(s):null;return o&&!r?t>=o:!o&&r?t<=r:!o||!r||t>=o&&t<=r})),f(n),console.log("Filtered Orders:",n),x(`Found ${n.length} orders${i||s?` (filtered from ${r.length})`:""}`)}catch(e){console.error("Error fetching orders:",e),x(`Error: ${e.message}`),f([]),b([])}finally{u(!1)}};return(0,o.jsxs)("div",{style:{maxWidth:"1000px",margin:"0 auto",padding:"20px",fontFamily:"Arial, sans-serif"},children:[(0,o.jsx)("h1",{style:{color:"#2c3e50",textAlign:"center"},children:"Shopify Order Report Generator"}),(0,o.jsxs)("div",{style:{backgroundColor:"#f9f9f9",borderRadius:"8px",padding:"25px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[(0,o.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",color:"#2c3e50"},children:"Shop Domain"}),(0,o.jsx)("input",{type:"text",value:d,onChange:e=>l(e.target.value),placeholder:"your-store.myshopify.com",style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ddd",fontSize:"16px"}})]}),(0,o.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",color:"#2c3e50"},children:"Date Range (Optional)"}),(0,o.jsxs)("div",{style:{display:"flex",gap:"15px"},children:[(0,o.jsxs)("div",{style:{flex:1},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px"},children:"From"}),(0,o.jsx)("input",{type:"date",value:i,onChange:e=>a(e.target.value),style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ddd"}})]}),(0,o.jsxs)("div",{style:{flex:1},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px"},children:"To"}),(0,o.jsx)("input",{type:"date",value:s,onChange:e=>c(e.target.value),style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ddd"}})]})]})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:"15px",marginBottom:"20px"},children:[(0,o.jsx)("button",{onClick:v,disabled:p,style:{flex:1,padding:"12px",backgroundColor:"#3498db",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",cursor:"pointer",fontWeight:"bold",transition:"background-color 0.3s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#2980b9",onMouseOut:e=>e.currentTarget.style.backgroundColor="#3498db",children:p?"Loading...":"Fetch Orders"}),(0,o.jsx)("button",{onClick:()=>{if(0===m.length)return void x("No orders to filter. Please fetch orders first.");let e=[...m];(i||s)&&(e=m.filter(e=>{let t=new Date(e.date),o=i?new Date(i):null,r=s?new Date(s):null;return o&&!r?t>=o:!o&&r?t<=r:!o||!r||t>=o&&t<=r})),f(e),x(`Found ${e.length} orders${i||s?` (filtered from ${m.length})`:""}`)},disabled:p||0===m.length,style:{flex:1,padding:"12px",backgroundColor:m.length>0?"#9b59b6":"#95a5a6",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",cursor:m.length>0?"pointer":"not-allowed",fontWeight:"bold",transition:"background-color 0.3s"},onMouseOver:e=>m.length>0&&(e.currentTarget.style.backgroundColor="#8e44ad"),onMouseOut:e=>m.length>0&&(e.currentTarget.style.backgroundColor="#9b59b6"),children:"Apply Date Filter"}),(0,o.jsx)("button",{onClick:()=>{if(0===h.length)return void x("No orders to generate report");try{let e="data:text/csv;charset=utf-8,";e+="Order ID,Order Name,Date,Customer,Email,Total,Discount,Status,Payment Method,Shipping Method,Items\n",h.forEach(t=>{let o=t.items.map(e=>`${e.product} (Qty: ${e.quantity})`).join(", "),r=[t.id,t.name,t.date,`"${t.customer}"`,t.email,t.total,t.discount,t.status,`"${t.payment}"`,`"${t.shipping}"`,`"${o}"`];e+=r.join(",")+"\n"});let t=`shopify-orders-report-${d}-${new Date().toISOString().slice(0,10)}.csv`,o=new Blob([e],{type:"text/csv;charset=utf-8;"});(0,n.saveAs)(o,t),x(`CSV report generated: ${t}`)}catch(e){console.error("Error generating CSV:",e),x(`Error generating CSV: ${e.message}`)}},disabled:p||0===h.length,style:{flex:1,padding:"12px",backgroundColor:h.length>0?"#2ecc71":"#95a5a6",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",cursor:h.length>0?"pointer":"not-allowed",fontWeight:"bold",transition:"background-color 0.3s"},onMouseOver:e=>h.length>0&&(e.currentTarget.style.backgroundColor="#27ae60"),onMouseOut:e=>h.length>0&&(e.currentTarget.style.backgroundColor="#2ecc71"),children:"Generate CSV Report"})]}),g&&(0,o.jsx)("div",{style:{padding:"12px",backgroundColor:g.includes("Error")?"#fadbd8":"#d5f5e3",color:g.includes("Error")?"#c0392b":"#27ae60",borderRadius:"4px",marginTop:"10px",textAlign:"center",fontWeight:"bold"},children:g}),h.length>0&&(0,o.jsxs)("div",{style:{marginTop:"30px"},children:[(0,o.jsx)("h2",{style:{color:"#2c3e50",marginBottom:"15px"},children:i||s?`Filtered Orders (${h.length})`:`All Orders (${h.length})`}),(0,o.jsx)("div",{style:{maxHeight:"400px",overflowY:"auto",border:"1px solid #ddd",borderRadius:"4px"},children:(0,o.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{style:{backgroundColor:"#f2f2f2"},children:[(0,o.jsx)("th",{style:{padding:"10px",textAlign:"left",borderBottom:"1px solid #ddd"},children:"Order #"}),(0,o.jsx)("th",{style:{padding:"10px",textAlign:"left",borderBottom:"1px solid #ddd"},children:"Date"}),(0,o.jsx)("th",{style:{padding:"10px",textAlign:"left",borderBottom:"1px solid #ddd"},children:"Customer"}),(0,o.jsx)("th",{style:{padding:"10px",textAlign:"left",borderBottom:"1px solid #ddd"},children:"Total"}),(0,o.jsx)("th",{style:{padding:"10px",textAlign:"left",borderBottom:"1px solid #ddd"},children:"Status"}),(0,o.jsx)("th",{style:{padding:"10px",textAlign:"left",borderBottom:"1px solid #ddd"},children:"Payment"})]})}),(0,o.jsx)("tbody",{children:h.map((e,t)=>(0,o.jsxs)("tr",{style:{backgroundColor:t%2==0?"#ffffff":"#f9f9f9"},children:[(0,o.jsx)("td",{style:{padding:"10px",borderBottom:"1px solid #ddd"},children:e.name}),(0,o.jsx)("td",{style:{padding:"10px",borderBottom:"1px solid #ddd"},children:e.date}),(0,o.jsx)("td",{style:{padding:"10px",borderBottom:"1px solid #ddd"},children:e.customer}),(0,o.jsxs)("td",{style:{padding:"10px",borderBottom:"1px solid #ddd"},children:["$",e.total]}),(0,o.jsx)("td",{style:{padding:"10px",borderBottom:"1px solid #ddd"},children:e.status}),(0,o.jsx)("td",{style:{padding:"10px",borderBottom:"1px solid #ddd"},children:e.payment})]},e.id))})]})})]})]})]})}])}]);